<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8"/>
	<title>SoundCloud Recorder</title>
	<script src="js/swfobject.js"></script>
	<script>
		// check if the browser is an iDevice, Android, or other mobile device, and redirect
		// to the relevant SoundCloud page.
		if (navigator.userAgent.match(/(iPhone|iPod|iPad)/)) {
			window.location.replace("http://soundcloud.com/apps/iphone");
		} else if (navigator.userAgent.match(/Android/)) {
			window.location.replace("http://soundcloud.com/apps/android");
		} else if (navigator.userAgent.match(/mobile/i)) {
			window.location.replace("http://soundcloud.com/mobile");
		}
		
		var getQueryString = function () {
			if (window.location.search) {
				// we don't need the "?" character
				return window.location.search.substr(1);
			} else if (window.location.hash) {
				// we don't need the "#" character
				return window.location.hash.substr(1);
			}
		};
		
		var flashvars = {
			soundCloudClientID: "b6812c7c576cc7613712d5d0a20e220f",
			// always redirect back to this URI
			soundCloudRedirectURI: window.location.protocol + "//" + window.location.hostname + window.location.pathname,
			// SoundCloud's authorisation URL as a template
			// must be escaped - otherwise special characters can be cut off when read by Flash
			// must contain $CLIENT_ID$ and $REDIRECT_URI$ to be parsed properly
			soundCloudAuthorisationURLTemplate: escape("https://soundcloud.com/connect?client_id=$CLIENT_ID$&response_type=token&redirect_uri=$REDIRECT_URI$")
		};
		
		var params = {
			menu: "false",
			scale: "noScale",
			allowFullscreen: "true",
			allowScriptAccess: "always",
			bgcolor: "",
			wmode: "direct" // can cause issues with FP settings & webcam
		};
		
		var attributes = {
			id:"soundcloudrecorder"
		};
		
		swfobject.embedSWF(
			"soundcloudrecorder.swf", 
			"altContent", "100%", "100%", "10.0.0", 
			"expressInstall.swf", 
			flashvars, params, attributes);
	</script>
	<style>
		html, body { height:100%; overflow:hidden; }
		body { margin:0; }
	</style>
</head>
<body>
	<div id="altContent">
		<h1>SoundCloud Recorder</h1>
		<p><a href="http://www.adobe.com/go/getflashplayer">Get Adobe Flash player</a></p>
	</div>
</body>
</html>