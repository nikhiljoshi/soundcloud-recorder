<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8"/>
	<title>SoundCloud Recorder</title>
	<script src="js/swfobject.js"></script>
	<script id="iDeviceContent" type="text/html">
		<h1>SoundCloud Recorder</h1>
		<p>Unfortunately, SoundCloud Recorder requires Flash, which is not available on your device.</p>
		<p>To record sounds and upload them to your SoundCloud account using your iPhone or iPad,
		<a href="http://itunes.apple.com/us/app/soundcloud/id336353151">get the iPad + iPhone app on iTunes</a>.</p>
	</script>
	<script id="androidContent" type="text/html">
		<h1>SoundCloud Recorder</h1>
		<p>Unfortunately, SoundCloud Recorder requires Flash.</p>
		<p>To record sounds and upload them to your SoundCloud account using your Android phone,
		<a href="https://market.android.com/details?id=com.soundcloud.android">get the Android app on the Android Market</a>.</p>
	</script>
	<script id="mobileContent" type="text/html">
		<h1>SoundCloud Recorder</h1>
		<p>Unfortunately, SoundCloud Recorder requires Flash.</p>
		<p>To record sounds and upload them to your SoundCloud account, take a look at SoundCloud's
		<a href="http://soundcloud.com/mobile/">mobile apps</a>.</p>
	</script>
	<script>
		swfobject.addDomLoadEvent(function () {
			var altContent = document.getElementById("altContent");
			
			// if altContent does not exist, the Flash has been inserted successfully.
			if (!altContent)
				return;
			
			// check if the browser is an iDevice, Android, or other mobile device, and if so,
			// change the alternative content to show relevant information to the user.
			
			// iDevice
			if (navigator.userAgent.match(/(iPhone|iPod|iPad)/)) {
				altContent.innerHTML = document.getElementById("iDeviceContent").innerHTML;
			// Android
			} else if (navigator.userAgent.match(/Android/)) {
				altContent.innerHTML = document.getElementById("androidContent").innerHTML;
			// Other mobile
			} else if (navigator.userAgent.match(/mobile/i)) {
				altContent.innerHTML = document.getElementById("mobileContent").innerHTML;
			}
		});
		
		var getQueryString = function () {
			if (window.location.search) {
				// we don't need the "?" character.
				return window.location.search.substr(1);
			} else if (window.location.hash) {
				// we don't need the "#" character.
				return window.location.hash.substr(1);
			}
		};
		
		var flashvars = {
			// the maximimum length of a recorded sound.
			maxRecordingTimeSeconds: 180,
			soundCloudClientID: "b6812c7c576cc7613712d5d0a20e220f",
			// always redirect back to this URI.
			soundCloudRedirectURI: window.location.protocol + "//" + window.location.hostname + window.location.pathname,
			// SoundCloud's authorisation URL as a template.
			// must be escaped - otherwise special characters can be cut off when read by Flash.
			// must contain $CLIENT_ID$ and $REDIRECT_URI$ to be parsed properly.
			soundCloudAuthorisationURLTemplate: escape("https://soundcloud.com/connect?client_id=$CLIENT_ID$&response_type=token&redirect_uri=$REDIRECT_URI$"),
			// the URL to which the app should upload recorded sounds.
			soundCloudTrackURL: "https://api.soundcloud.com/tracks.xml"
		};
		
		var params = {
			menu: "false",
			scale: "noScale",
			allowFullscreen: "true",
			allowScriptAccess: "always",
			bgcolor: "",
			wmode: "direct" // can cause issues with FP settings & webcam
		};
		
		var attributes = {
			id:"soundcloudrecorder"
		};
		
		swfobject.embedSWF(
			"soundcloudrecorder.swf", 
			"altContent", "100%", "100%", "10.0.0", 
			"expressInstall.swf", 
			flashvars, params, attributes);
	</script>
	<style>
		html, body { height:100%; overflow:hidden; }
		body { margin:0; }
	</style>
</head>
<body>
	<div id="altContent">
		<h1>SoundCloud Recorder</h1>
		<p>It appears that you do not have the Adobe Flash played installed.</p>
		<p><a href="http://www.adobe.com/go/getflashplayer">Please install the Adobe Flash player</a>.</p>
	</div>
</body>
</html>